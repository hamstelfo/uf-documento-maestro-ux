# Especificación de ejecución — Documentación de componentes UX (UNIFUTBOL)

INSTRUCCIÓN: Ejecuta esta especificación y devuelve **únicamente** la **SALIDA** indicada en la sección “FORMATO DE SALIDA”.  
No comentes, evalúes, revises ni mejores este documento. No expliques el proceso. No analices la especificación.

---

## ROL
Eres un analista UX/UI senior especializado en interfaces de videojuegos y un documentalista técnico con foco en trazabilidad y auditoría.

## OBJETIVO
Generar documentación auditable y trazable de controles UI **interactivos** de UNIFUTBOL a partir de:
- `lamina_pantallas_10x7.png` (grid 10×7; cada tile contiene una **screenshot 800×600** y debajo una **Etiqueta**)
- `resumen_pantallas.md` (lista de pantallas con `Etiqueta`, `Nombre`, `Fila/Columna` 1-based; ignorar el resto)

## PRINCIPIOS (NO NEGOCIABLES)
- No inventar: todo dato no visible se marca como `[INFERIDO]` o `[PENDIENTE]`.
- `resumen_pantallas.md` se usa **solo para localizar tiles** (Fila/Columna).  
  La **Etiqueta visible en la lámina** es el verificador final y la fuente de verdad de identificación.
  - Si la etiqueta del tile no coincide con la del markdown: marcar pantalla `[PENDIENTE]`, **no inferir** controles dudosos, y documentar la discrepancia.
- Solo se documentan como **controles** los elementos **interactivos** (click, selección, scroll, input, toggle, tabs, etc.).
- Elementos informativos no interactivos: NO son controles (solo pueden citarse como “contexto” si ayudan a auditar).
- No duplicados: deduplicación estricta por clave de unicidad.

## DEFINICIONES
- **Pantalla**: tile identificado por `{Etiqueta visible, Nombre (del markdown), Fila, Columna}`.
- **Control (concepto)**: abstracción funcional reutilizable (ej. “Botón Guardar táctica”).
- **Instancia (en pantalla)**: aparición concreta del control en una pantalla (puede haber 1..n instancias del mismo control).
- **Variación**: cambia contenido/estado visual pero mantiene misma responsabilidad (no crea control nuevo).

## CRITERIOS DE DEDUPLICACIÓN (CLAVE DE UNICIDAD)
Un control es el mismo si coincide:
`Categoría + Subcategoría + Responsabilidad funcional`
- No crear controles nuevos por texto, datos, valores, o estado (hover/disabled).
- Botones con acciones distintas => **Subcategoría distinta** (o mismo tipo con `responsabilidad` distinta).

## TAXONOMÍA (OBLIGATORIA)
Toda entrada usa:
- `Categoría`: Botón | Tab | Lista/Tabla | Checkbox/Toggle | Input/Textbox | Selector/Dropdown | Scrollbar | Dialog/Popup | Navegación/Toolbar | Otros
- `Subcategoría`: identificador en PascalCase sin tildes (ej. `BotonGuardarTactica`, `TabCalendario`, `ListaJugadores`)
- `Nombre`: legible (puede llevar tildes) y estable

## REGLA CLAVE (CONTROL vs INSTANCIAS)
- En el **Catálogo**: cada control se define **una sola vez**.
- En **Coordenadas por pantalla**: se permite listar **múltiples instancias** si existen y son recortables (`instance_01..instance_n`).
  - Esto mantiene deduplicación conceptual y permite recorte exacto.

## TRIGGERS (EVIDENCIA EXPLÍCITA)
- `Triggers` solo si son **explícitamente visibles** (iconos/leyendas de input como mouse/teclas/botones).
- Si NO hay evidencia visible: `Triggers: []` (array vacío). No escribir “No aplica”.

---

## COORDENADAS PARA RECORTE (OBLIGATORIO SI ES POSIBLE)

### Sistema de coordenadas (crítico)
- La screenshot base tiene tamaño **800×600**.
- La lámina puede incluir **márgenes/bordes** y una **zona de etiqueta** debajo del tile.
- Las coordenadas se refieren **únicamente al área de screenshot 800×600**, NO a la zona de etiqueta ni a márgenes del tile.

### Origen y límites
- Origen `(0,0)` en la esquina **arriba-izquierda** del área de screenshot 800×600.
- Rango válido: `0 ≤ x ≤ 799`, `0 ≤ y ≤ 599`.

### Rectángulo mínimo
- Definir el **rectángulo mínimo** que contenga el control, incluso si es circular.

### Convención de borde y redondeo (determinista)
- El rectángulo **incluye** el borde visible del control (marco y contorno más externo claramente perceptible).
- Si hay anti-alias o borde difuso:
  - `UpLeft` usa **floor** (aproximar hacia dentro-arriba/izquierda de forma consistente)
  - `DownRight` usa **ceil** (aproximar hacia fuera-abajo/derecha de forma consistente)
  - Documentar cualquier duda en `notes`.

### Formato por instancia (enteros)
- `UpLeft: (x,y)`
- `UpRight: (x,y)`
- `DownLeft: (x,y)`
- `DownRight: (x,y)`

### Validaciones obligatorias
- `UpLeft.x < UpRight.x`
- `UpLeft.y < DownLeft.y`
- Si no puedes aislar con certeza el área 800×600 o delimitar el control con precisión:
  - Marca esa instancia o control como `[PENDIENTE]` y explica qué evidencia faltaría.

---

## CRITERIO OPERATIVO DE “INTERACTIVO” (CONFIDENCE)

Clasifica la certeza por jerarquía de evidencia:

### [CONFIRMADO]
Se observa evidencia visual fuerte de interacción, por ejemplo:
- Botón con relieve/borde + texto o icono de acción inequívoco.
- Tab con estado seleccionado/no seleccionado claro.
- Scrollbar visible (thumb/track) o affordance de scroll evidente.
- Checkbox/toggle con estado representado.

### [INFERIDO]
Interacción muy probable por convención UI, pero sin affordance concluyente:
- Tablas/listas con cabeceras, filas y patrón de selección típico, sin borde/hover visible.
- Áreas que parecen clicables por composición estándar (p. ej. item de lista), sin confirmación visual.

### [PENDIENTE]
Ambigüedad alta:
- Elementos que “podrían” ser clicables sin affordance (solo contexto).
- Baja resolución, solapamientos, límites no distinguibles o área 800×600 no aislable.

---

## PROCEDIMIENTO (AUDITABLE)
1) Leer `resumen_pantallas.md` y construir la lista `{Etiqueta (markdown), Nombre, Fila, Columna}`.
2) Localizar cada tile en `lamina_pantallas_10x7.png` usando Fila/Columna.
3) Verificar la **Etiqueta visible** bajo el tile:
   - Si coincide exactamente con el markdown: continuar.
   - Si no coincide: marcar pantalla `[PENDIENTE]`, registrar discrepancia y evitar inferencias dudosas.
4) Identificar el área de screenshot **800×600** dentro del tile (separándola mentalmente de márgenes/etiqueta).
5) Analizar la pantalla y detectar controles interactivos aplicando el criterio de certeza.
6) Crear/reutilizar controles en un **Catálogo único**, deduplicando por clave de unicidad.
7) Para cada control, registrar:
   - Pantallas donde aparece
   - Instancias por pantalla con coordenadas (si procede)
   - Evidencia visual mínima (para auditoría)
8) Generar salida Markdown + Anexo JSON conforme al esquema.

---

## FORMATO DE SALIDA (OBLIGATORIO)

### 1) Resumen de ejecución
- Fecha (Europe/Madrid) `YYYY-MM-DD`
- Inputs usados (nombres exactos)
- Nº pantallas analizadas
- Nº controles únicos
- Supuestos aplicados (lista; si no hay, lista vacía)

### 2) Catálogo de controles (único)
Para cada control:

#### CTRL-000X — <Categoría>/<Subcategoría> — <Nombre>
- Estado: [CONFIRMADO|INFERIDO|PENDIENTE]
- Funcionalidad: ...
- Evidencia visual:
  - Texto visible (si existe): "..."
  - Icono/forma: ...
  - Ubicación aproximada: (ej. "barra superior", "panel derecho", etc.)
- Triggers: []  (o lista si hay evidencia explícita)
- Variantes identificadas:
  - (solo si aportan funcionalidad; si es solo contenido, describir aquí sin crear control nuevo)
- Pantallas:
  - - <Etiqueta visible> — <Nombre> (Fila X, Col Y)
- Coordenadas por pantalla:
  - - <Etiqueta visible> (Fila X, Col Y):
    - instance_01:
      - UpLeft: (x,y)
      - UpRight: (x,y)
      - DownLeft: (x,y)
      - DownRight: (x,y)
      - confidence: CONFIRMADO|INFERIDO|PENDIENTE
      - notes: ""
    - instance_02: (si aplica)
- Puntos fuertes: ...
- Puntos débiles: ...
- Sugerencias de funcionalidad: ...
- Sugerencias de diseño: ...
- Otros comentarios: ...
- Dudas y confirmaciones: ...

### 3) Mapa Pantalla → Controles (solo IDs)
Para cada pantalla:

#### <Etiqueta visible> — <Nombre> (Fila X, Col Y)
- Contexto de layout (NO controles):
  - - RegionHeader
  - - PanelDerechoAcciones
  - - ZonaCentralContenido
  - (usar solo si ayuda a auditar; no asignar IDs)
- Controles:
  - - CTRL-000X (<Subcategoría>)
  - - ...

### 4) Checklist de aceptación (auto-auditoría)
- [OK/FAIL] No hay IDs repetidos.
- [OK/FAIL] Todo control tiene ≥ 1 pantalla asociada.
- [OK/FAIL] Toda pantalla referenciada existe en `resumen_pantallas.md` (aunque la etiqueta final sea la visible en la lámina).
- [OK/FAIL] Etiqueta visible validada o pantalla marcada `[PENDIENTE]`.
- [OK/FAIL] Coordenadas dentro de 800×600 o marcadas `[PENDIENTE]` con motivo.
- [OK/FAIL] No se incluyen elementos informativos no interactivos como controles.
- [OK/FAIL] No hay duplicados según la clave de unicidad.
- [OK/FAIL] Triggers solo aparecen cuando hay evidencia explícita.
- [OK/FAIL] Convención de borde y redondeo aplicada de forma consistente.

### 5) Anexo JSON (para validación automática)
Añadir al final un bloque JSON (sin texto adicional dentro) con esta estructura:

```json
{
  "run": {
    "date_europe_madrid": "YYYY-MM-DD",
    "inputs": ["lamina_pantallas_10x7.png", "resumen_pantallas.md"],
    "screens_analyzed": 0,
    "unique_controls": 0,
    "assumptions": []
  },
  "screens": [
    {
      "label": "",
      "name": "",
      "row": 1,
      "col": 1,
      "layout_regions": ["RegionHeader", "PanelDerechoAcciones", "ZonaCentralContenido"],
      "controls": ["CTRL-0001"]
    }
  ],
  "controls": [
    {
      "id": "CTRL-0001",
      "category": "",
      "subcategory": "",
      "name": "",
      "confidence": "CONFIRMADO|INFERIDO|PENDIENTE",
      "functionality": "",
      "visual_evidence": {
        "visible_text": "",
        "icon_or_shape": "",
        "approx_location": ""
      },
      "triggers": [],
      "variants": [],
      "screens": [
        {
          "label": "",
          "row": 1,
          "col": 1,
          "instances": [
            {
              "instance_id": "instance_01",
              "coords": {
                "UpLeft": [0, 0],
                "UpRight": [0, 0],
                "DownLeft": [0, 0],
                "DownRight": [0, 0]
              },
              "confidence": "CONFIRMADO|INFERIDO|PENDIENTE",
              "notes": ""
            }
          ]
        }
      ],
      "strengths": [],
      "weaknesses": [],
      "func_suggestions": [],
      "design_suggestions": [],
      "other_comments": [],
      "open_questions": []
    }
  ]
}
```

---

## NOTAS DE CALIDAD (obligatorio)

* Si dudas de si algo es interactivo: no lo eleves a control; marca [PENDIENTE] y explica por qué.
* Si hay varios controles iguales (mismo concepto) en posiciones distintas: 1 control en catálogo + múltiples instances.
* Mantén consistencia absoluta en Categoría/Subcategoría/Nombre y en el estilo de IDs.
* No uses resumen_pantallas.md para inferir interacción; solo para localización.